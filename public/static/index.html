<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>My Page</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.1/jquery.mobile-1.2.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.1/jquery.mobile-1.2.1.min.js"></script>
    <link rel="stylesheet" type="text/css" href="./stylesheets/style.css">
</head>
<body>

<!-- Start of first page: #mainPage -->
<div data-role="page" id="mainPage">

    <div data-role="header" data-theme="b">
        <h1>TLV-Streets</h1>
    </div><!-- /header -->

    <div data-role="content">
        <h2 align="center">
        <img src="static/logo.jpg"alt="TLV_Logo" height="100" width="250" align="middle">
        </h2>
        <p><a href="#searchByPage" data-role="button" data-icon="search"> חיפוש לפי</a></p>
        <p><a href="#randomPage" data-role="button" data-icon="star"> ?הידעת</a></p>
        <p><a href="#aboutUsPage" data-role="button" data-rel="dialog" data-transition="pop" data-icon="info">?מי אנחנו</a></p>
    </div><!-- /content -->

    <div data-role="footer" data-theme="d" class="ui.footer">
        <p align="center" style="font-size:70%"> המידע באדיבות עיריית תל אביב - יפו</p>
    </div><!-- /footer -->


</div><!-- /end of #mainPage -->

<!-- Start of #searchByPage -->
<div data-role="page" id="searchByPage">

    <div data-role="header" data-theme="b">
        <h1></h1>
    </div><!-- /header -->

    <div data-role="content" >
        <h2 align="center"></h2>
        <p><a href="#byNamePage" data-role="button" data-icon=""> שם רחוב</a></p>
        <p><a href="#byLocationPage" data-role="button" data-icon="">המיקום שלי </a></p>

        <p align="center"><a href="#mainPage" data-direction="reverse" data-role="button" data-icon="back" data-iconpos="notext"></a></p>
    </div><!-- /content -->

    <div data-role="footer" data-theme="d" class="ui.footer">
        <p align="center" style="font-size:70%"> המידע באדיבות עיריית תל אביב - יפו</p>
    </div><!-- /footer -->

</div><!-- /end of #searchByPage -->


<!-- Start of #byNamePage -->
<div data-role="page" id="byNamePage">

    <div data-role="header" data-theme="b">
        <h1>חיפוש לפי שם הרחוב</h1>
    </div><!-- /header -->

    <div data-role="content" cal>
        <h3 align="center"> :הכנס שם רחוב</h3>
        <input type="search" name="search-mini" id="searchInput" value="" data-mini="true" />
        <h2 align="center">
        <a href="#byNameResponsePage"><button id="Get"  onclick="getValue()" data-inline="true">חפש</button></a>
        </h2>
        </h2>

       <!-- <script src="../parser.js"></script>
        <script>
            function getValue() {
                var inputText = document.getElementById('searchInput');
                if (inputText.value != "")
                    alert(Parser.getStreetValue(inputText));
                else
                    alert("please enter street name");
                return inputText;
            }
        </script> -->

        <p align="center"><a href="#searchByPage" data-direction="reverse" data-role="button" data-icon="back" data-iconpos="notext"></a></p>

    </div><!-- /content -->

    <div data-role="footer" data-theme="d" class="ui.footer">
        <p align="center" style="font-size:70%"> המידע באדיבות עיריית תל אביב - יפו</p>
    </div><!-- /footer -->

</div><!-- /end of #byNamePage -->

<!-- Start of #byNameResponsePage -->
<div data-role="page" id="byNameResponsePage">

    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">

    <div data-role="header" data-theme="b">
        <h1>:חיפוש לפי שם הרחוב</h1>
    </div><!-- /header -->

    <div data-role="content">
        <div id="map1" align="center"></div>
        <style>
            #map {
                height: 200px;
                border-style: solid;
                border-width: 5px;
                border-color: #4f6f9a;
            }
        </style>
        <br>
        <div  id="square" align="center">
            <span id="#streetValue" class="innerTEXT" >
                <script type="text/javascript">
                    $(document).ready(function(){
                        getStreetValue();
                    })
                    function getStreetValue() {
                        $("#streetValue").html();
                    }
                </script>
            </span>
        </div>
        <p align="center">
            <a href="#searchByPage" data-direction="reverse" data-role="button" data-inline="true" data-icon="back" data-iconpos="notext"></a>
        </p>
    </div><!-- /content -->

    <div data-role="footer" data-theme="d" class="ui.footer">
        <p align="center" style="font-size:70%"> המידע באדיבות עיריית תל אביב - יפו</p>
    </div><!-- /footer -->


    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?language=iw"></script>


    <script>
        $(document).on( 'pageshow', '#byLocationPage',function(event){
            initMap();
        });

        function initMap(lat, lng) {
            var map = new google.maps.Map(document.getElementById('map'), {
                center: {lat: 32.08153566996312, lng: 34.77752322388187},
                zoom: 8,
                mapTypeControl: false,
                streetViewControl: false,
                zoomControl: false,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            });
        }

    </script>

</div><!-- /end of #byNameResponsePage -->

<!-- Start of #byLocationPage -->
<div data-role="page" id="byLocationPage">

    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">

    <div data-role="header" data-theme="b">

        <h1>חיפוש לפי מיקום</h1>

    </div><!-- /header -->

    <div data-role="content">
        <div id="map" align="center"></div>
        <style>
            #map {
                height: 200px;
                border-style: solid;
                border-width: 5px;
                border-color: #4f6f9a;
            }
        </style>
        <br>
        <div  id="square" align="center">
            <span id="#streetValue" class="innerTEXT" >
                <script type="text/javascript">
                $(document).ready(function(){
                    getStreetValue();
                })
                    function getStreetValue() {
                        $("#streetValue").html();
                    }
                </script>
            </span>
        </div>
        <p align="center">
            <a href="#searchByPage" data-direction="reverse" data-role="button" data-inline="true" data-icon="back" data-iconpos="notext"></a>
        </p>
    </div><!-- /content -->

    <div data-role="footer" data-theme="d" class="ui.footer">
        <p align="center" style="font-size:70%"> המידע באדיבות עיריית תל אביב - יפו</p>
    </div><!-- /footer -->


    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?language=iw"></script>


    <script>
        $(document).on( 'pageshow', '#byLocationPage',function(event){
            initMap();
        });

        function initMap() {
            var map = new google.maps.Map(document.getElementById('map'), {
                center: {lat: 32.08153566996312, lng: 34.77752322388187},
                zoom: 8,
                mapTypeControl: false,
                streetViewControl: false,
                zoomControl: false,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            });
            // Try HTML5 geolocation
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    var pos = {
                        lat: position.coords.latitude,
                        lng: position.coords.longitude
                    };

                    getStreetNameFromGoogleGeo(map, pos);


                }, function() {
                    handleLocationError(true, infoWindow, map.getCenter());
                });
            } else {
                // Browser doesn't support Geolocation
                handleLocationError(false, infoWindow, map.getCenter());
            }
        }

        function handleLocationError(browserHasGeolocation, infoWindow, pos) {
            infoWindow.setPosition(pos);
            infoWindow.setContent(browserHasGeolocation ?
                    'Error: The Geolocation service failed.' :
                    'Error: Your browser doesn\'t support geolocation.');
        }

        function getStreetNameFromGoogleGeo(map, pos) {
            var geocoder = new google.maps.Geocoder();
            var latlng = new google.maps.LatLng(pos.lat, pos.lng);

            geocoder.geocode({'latLng': latlng}, function(results, status) {

                if (status == google.maps.GeocoderStatus.OK) {
                    alert(results[0].address_components[1].long_name);
                    map.setCenter(results[0].geometry.location);
                    map.fitBounds(results[0].geometry.bounds);

                } else {
                    alert("Geocoder failed due to: " + status);
                }
            });
        }


    </script>

</div><!-- /end of #byLocationPage -->

<!-- Start of #randomPage -->
<div data-role="page" id="randomPage">

    <div data-role="header" data-theme="b">
        <h1></h1>
    </div><!-- /header -->

    <div data-role="content">
        <h2 align="center">random page</h2>
        <p align="center">this is random page</p>

        <p align="center"><a href="#mainPage" data-direction="reverse" data-role="button" data-icon="back" data-iconpos="notext"></a></p>
    </div><!-- /content -->

    <div data-role="footer" data-theme="d" class="ui.footer">
        <p align="center" style="font-size:70%"> המידע באדיבות עיריית תל אביב - יפו</p>
    </div><!-- /footer -->

</div><!-- /end of #randomPage -->

<!-- Start of #aboutUsPage -->
<div data-role="page" id="aboutUsPage">

    <div data-role="header" data-theme="e">
        <h1>?מי אנחנו</h1>
    </div><!-- /header -->

    <p data-role="content" data-theme="d">
        <img src="static/street_sign_with_names.png" height="100%" width="100%">
    </p><!-- /content -->
    </div><!-- /end of #aboutUsPage -->

</body>
</html>